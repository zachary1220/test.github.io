<!DOCTYPE html>
<html>
<head>
<title>Accelerometer Data</title>
<style>
  #grant_permission{
    padding: 20px;
    font-size: 30px;
  }
</style>
</head>

<body>
<h2>Accelerometer Data</h2>

<p id='x'>X: </p>
<p id='y'>Y: </p>
<p id='z'>Z: </p>

<button id='grant_permission'>Grant Permission</button>

<script>
let x, y, z;
document.getElementById('grant_permission').onclick = function() {
  if (typeof DeviceMotionEvent.requestPermission === 'function') {
    DeviceMotionEvent.requestPermission()
    .then(permissionState => {
      if (permissionState === 'granted') {
        window.addEventListener('devicemotion', motion, false);
      }
    })
    .catch(console.error);
  } else {
    window.addEventListener('devicemotion', motion, false); // handle regular non iOS 13+ devices
  }

  function motion(event) {
    x = event.accelerationIncludingGravity.x.toFixed(2);
    y = event.accelerationIncludingGravity.y.toFixed(2);
    z = event.accelerationIncludingGravity.z.toFixed(2);
  }
  
  setInterval(function(){
    document.getElementById('x').innerHTML = 'X: ' + x;
    document.getElementById('y').innerHTML = 'Y: ' + y;
    document.getElementById('z').innerHTML = 'Z: ' + z;
  }, 1000);
}
</script>

</body>
</html>
